<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>PinBoard</title>
    <script src="https://pinboard.local.dev-gutools.co.uk/pinboard.loader.js"></script>
  </head>

  <body>
    <a href="?expandPinboard=true"
      >Expand pinboard via query param <code>?expandPinboard=true</code></a
    >
    <h3>Pinboard pre-selection</h3>
    <ul>
      <h4>
        via query param (for composer ID <code>54f2d2fee4b011581586e710</code>)
      </h4>
      <ul>
        <li>
          <a href="?pinboardComposerID=54f2d2fee4b011581586e710"
            >?pinboardComposerID=54f2d2fee4b011581586e710</a
          >
        </li>
        <li>
          <a href="?"><em>REMOVE QUERY PARAM</em></a>
        </li>
      </ul>

      <h4>
        via hidden element (for composer ID
        <code>54f2d2fee4b011581586e710</code>)
      </h4>
      <button id="btn-add-preselection">Add pinboard pre-selection</button>
      <button id="btn-remove-preselection">
        Remove pinboard pre-selection
      </button>

      <h4>via hidden element (for invalid/untracked composer ID)</h4>
      <button id="btn-add-invalid-preselection">
        Add pinboard INVALID pre-selection
      </button>
      <button id="btn-remove-invalid-preselection">
        Remove pinboard INVALID pre-selection
      </button>
    </ul>

    <h3>Override unread notifications bubble</h3>

    <label for="unread-nots"
      >Set with a blank input or 0 to see a plain red ðŸ”´</label
    >
    <div>
      <input type="number" name="unread-nots" id="unread-nots" />
      <button id="btn-set-unread-notifications-bubble">Set</button>
      <button id="btn-unset-unread-notifications-bubble">Unset</button>
    </div>

    <h3><code>Add to ðŸ“Œ</code> button</h3>
    <ul id="button_section">
      <h4>present initially</h4>
      <asset-handle
        data-source="grid"
        data-source-type="crop"
        data-thumbnail="https://s3-eu-west-1.amazonaws.com/media-origin.test.dev-guim.co.uk/24733ea386c7fcb37496c55cc86e8f1468b9dfcf/817_0_1866_2333/400.jpg"
        data-embeddable-url="https://media.test.dev-gutools.co.uk/images/24733ea386c7fcb37496c55cc86e8f1468b9dfcf?crop=817_0_1866_2333"
      ></asset-handle>
      <h4>presented after 1 second</h4>
      <!--
              the setTimeout in the <script> further up will add an element here after 1 second,
              which the PinBoard library will detect and convert to a button
          -->
      <p>
        to simulate the host platform presenting re-rendering (i.e. for SPAs)
        and Pinboard detecting that and still taking over the element
      </p>
    </ul>
  </body>
  <script>
    setTimeout(
      () => {
        const delayedAddButton = document.createElement("asset-handle");
        delayedAddButton.dataset.source = "grid";
        delayedAddButton.dataset.sourceType = "crop";
        delayedAddButton.dataset.thumbnail =
          "https://s3-eu-west-1.amazonaws.com/media-origin.test.dev-guim.co.uk/24733ea386c7fcb37496c55cc86e8f1468b9dfcf/817_0_1866_2333/400.jpg";
        delayedAddButton.dataset.dataEmbeddableUrl =
          "https://media.test.dev-gutools.co.uk/images/24733ea386c7fcb37496c55cc86e8f1468b9dfcf?crop=817_0_1866_2333";
        document.getElementById("button_section").appendChild(delayedAddButton);
      },
      1000 // 1 second delay
    );

    const preSelectPinboardElement = document.createElement(
      "pinboard-preselect"
    );
    preSelectPinboardElement.dataset.composerId = "54f2d2fee4b011581586e710";
    document
      .getElementById("btn-add-preselection")
      .addEventListener("click", () => {
        document.body.appendChild(preSelectPinboardElement);
      });
    document
      .getElementById("btn-remove-preselection")
      .addEventListener("click", () => {
        preSelectPinboardElement.remove();
      });

    const preSelectInvalidPinboardElement = document.createElement(
      "pinboard-preselect"
    );
    preSelectInvalidPinboardElement.dataset.composerId = "INVALID";
    document
      .getElementById("btn-add-invalid-preselection")
      .addEventListener("click", () => {
        document.body.appendChild(preSelectInvalidPinboardElement);
      });
    document
      .getElementById("btn-remove-invalid-preselection")
      .addEventListener("click", () => {
        preSelectInvalidPinboardElement.remove();
      });

    const presetUnreadBubblePinboardElement = document.createElement(
      "pinboard-bubble-preset"
    );
    document
      .getElementById("btn-set-unread-notifications-bubble")
      .addEventListener("click", () => {
        presetUnreadBubblePinboardElement.dataset.count =
          document.getElementById("unread-nots").value || "0";
        document.body.appendChild(presetUnreadBubblePinboardElement);
      });

    document
      .getElementById("btn-unset-unread-notifications-bubble")
      .addEventListener("click", () => {
        presetUnreadBubblePinboardElement.remove();
      });
  </script>
</html>
